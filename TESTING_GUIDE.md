# 功能測試指南

## 測試步驟

### 1. 測試註冊功能
1. 訪問 http://127.0.0.1:5000/register
2. 填寫以下資訊:
   - 使用者名稱: testuser
   - 電子郵件: test@example.com
   - 密碼: 123456
   - 確認密碼: 123456
3. 點擊「註冊」
4. 應該會跳轉到登入頁面並顯示成功訊息

### 2. 測試登入功能
1. 訪問 http://127.0.0.1:5000/login
2. 輸入:
   - 使用者名稱: testuser
   - 密碼: 123456
3. 點擊「登入」
4. 應該會跳轉到首頁,並在導航欄顯示使用者名稱

### 3. 測試運動數據分析
1. 在導航欄點擊「數據分析」或訪問 http://127.0.0.1:5000/statistics
2. 填寫運動數據表單:
   - 運動類型: 跑步
   - 時長: 30 分鐘
   - 體重: 70 公斤
   - 身高: 175 公分
   - 年齡: 25 歲
   - 性別: 男
   - 心率: 140 bpm
   - 體溫: 37.5°C
   - 強度: 中強度
3. 點擊「開始分析」
4. 查看分析結果,應該顯示:
   - 消耗卡路里
   - 心率區間
   - 運動強度
   - 效率評分
   - 健康建議

### 4. 測試儲存功能
1. 在分析結果下方找到「保存此次分析到歷史記錄」按鈕
2. 點擊按鈕
3. 應該會顯示成功訊息並跳轉到歷史記錄頁面

### 5. 測試歷史記錄頁面
1. 訪問 http://127.0.0.1:5000/history
2. 應該能看到:
   - 統計卡片(總記錄數、總卡路里等)
   - 卡路里消耗趨勢圖
   - 運動時長分布圖
   - 完整的記錄表格
3. 測試刪除功能:
   - 點擊某筆記錄的「刪除」按鈕
   - 確認刪除
   - 頁面應該重新載入,該記錄消失

### 6. 測試登出功能
1. 在導航欄點擊「登出」圖示
2. 應該會跳轉到首頁
3. 導航欄應該顯示「登入」和「註冊」按鈕

### 7. 測試未登入時的限制
1. 登出後,訪問 http://127.0.0.1:5000/statistics
2. 完成一次運動分析
3. 點擊「保存此次分析到歷史記錄」
4. 應該會跳轉到登入頁面(因為需要登入才能儲存)

## 預期結果

✅ 所有頁面都能正常載入
✅ 註冊功能正常,密碼被加密存儲
✅ 登入功能正常,session 正確建立
✅ 運動數據分析計算正確
✅ 已登入使用者可以儲存分析結果
✅ 歷史記錄頁面正確顯示數據和圖表
✅ 使用者只能查看和刪除自己的記錄
✅ 登出功能正常
✅ 未登入使用者無法儲存記錄

## 資料庫檢查

可以使用 SQLite 瀏覽器查看資料庫:
```bash
sqlite3 data/users.db
```

查看使用者:
```sql
SELECT * FROM users;
```

查看運動歷史記錄:
```sql
SELECT * FROM exercise_history;
```

檢查密碼是否加密:
```sql
SELECT username, password FROM users;
```
密碼應該是類似 `pbkdf2:sha256:...` 的加密字串

## 故障排除

### 問題: 無法儲存記錄
- 確認已登入
- 檢查 data 目錄是否存在
- 檢查資料庫文件權限

### 問題: 圖表不顯示
- 確認 Chart.js CDN 連線正常
- 檢查瀏覽器控制台是否有錯誤
- 確認至少有一筆歷史記錄

### 問題: 登入後仍顯示未登入
- 檢查 app.secret_key 是否設置
- 清除瀏覽器 Cookie
- 重新啟動 Flask 應用

## 應用程式資訊

- 運行位置: http://127.0.0.1:5000
- 資料庫位置: c:\Users\user\Desktop\web_project\data\users.db
- 除錯模式: 開啟
